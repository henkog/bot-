<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CyberCasino 2026</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --neon: #00d4ff; --pink: #ff00ff; --gold: #fbc531; --bg: #0a0b10; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; overflow: hidden; }
        
        /* –•–µ–¥–µ—Ä */
        .header { padding: 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.03); border-bottom: 1px solid rgba(0,212,255,0.2); }
        .balance { color: var(--gold); font-size: 1.3rem; font-weight: bold; text-shadow: 0 0 10px rgba(251,197,49,0.4); }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü */
        .page { display: none; padding: 20px; flex-direction: column; align-items: center; height: 70vh; justify-content: center; }
        .active { display: flex; }

        /* –°–õ–û–¢–´ */
        .machine { background: #111; padding: 20px; border-radius: 20px; border: 2px solid var(--neon); box-shadow: 0 0 30px rgba(0,212,255,0.2); }
        .slots { display: flex; gap: 10px; margin-bottom: 20px; }
        .slot { width: 70px; height: 90px; background: #000; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 3rem; border: 1px solid #333; }
        .spin-btn { width: 100%; padding: 15px; background: linear-gradient(45deg, var(--neon), var(--pink)); border: none; border-radius: 15px; color: white; font-weight: bold; font-size: 1.1rem; cursor: pointer; box-shadow: 0 5px 15px rgba(255,0,255,0.3); }

        /* –ú–ê–ì–ê–ó–ò–ù */
        .shop-item { width: 90%; background: #1a1a2e; padding: 15px; margin: 10px 0; border-radius: 15px; border: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .buy-btn { background: var(--neon); color: black; border: none; padding: 8px 15px; border-radius: 8px; font-weight: bold; }

        /* –¢–ê–ë-–ë–ê–† (–ù–∏–∂–Ω–µ–µ –º–µ–Ω—é) */
        .nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #111; border-top: 1px solid #333; padding: 10px 0; }
        .nav-item { flex: 1; text-align: center; color: #666; font-size: 0.8rem; cursor: pointer; transition: 0.3s; }
        .nav-item.active-nav { color: var(--neon); transform: translateY(-3px); }
        .nav-icon { font-size: 1.5rem; display: block; }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(0.95); } }
        .spinning { animation: bounce 0.1s infinite; }
    </style>
</head>
<body>

    <div class="header">
        <div id="username">PLAYER</div>
        <div class="balance"><span id="balance">1000</span> üí∞</div>
    </div>

    <div id="game-page" class="page active">
        <div class="machine" id="machine">
            <div class="slots">
                <div id="s1" class="slot">üíé</div>
                <div id="s2" class="slot">üíé</div>
                <div id="s3" class="slot">üíé</div>
            </div>
            <button class="spin-btn" id="spinBtn" onclick="play()">SPIN (100)</button>
        </div>
        <p id="status" style="margin-top:20px; color: var(--neon)">READY</p>
    </div>

    <div id="shop-page" class="page">
        <h2>CYBER SHOP</h2>
        <div class="shop-item">
            <span>üçÄ Lucky Amulet</span>
            <button class="buy-btn" onclick="buy('amulet', 1000)">1000 üí∞</button>
        </div>
        <div class="shop-item">
            <span>üõ°Ô∏è Shield Bot</span>
            <button class="buy-btn" onclick="buy('shield', 800)">800 üí∞</button>
        </div>
    </div>

    <div class="nav">
        <div class="nav-item active-nav" onclick="showPage('game')">
            <span class="nav-icon">üé∞</span> Slots
        </div>
        <div class="nav-item" onclick="showPage('shop')">
            <span class="nav-icon">üõí</span> Shop
        </div>
        <div class="nav-item" onclick="tg.close()">
            <span class="nav-icon">üö™</span> Exit
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        document.getElementById('username').innerText = tg.initDataUnsafe.user?.first_name || "PILOT";

        const symbols = ['üíé', 'üçí', 'üçã', '7Ô∏è‚É£', '‚ö°', 'üçá'];

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
            
            document.getElementById(pageId + '-page').classList.add('active');
            event.currentTarget.classList.add('active-nav');
        }

        function play() {
            const btn = document.getElementById('spinBtn');
            const machine = document.getElementById('machine');
            btn.disabled = true;
            machine.classList.add('spinning');
            
            let count = 0;
            let timer = setInterval(() => {
                document.getElementById('s1').innerText = symbols[Math.floor(Math.random()*symbols.length)];
                document.getElementById('s2').innerText = symbols[Math.floor(Math.random()*symbols.length)];
                document.getElementById('s3').innerText = symbols[Math.floor(Math.random()*symbols.length)];
                count++;
                if(count > 20) {
                    clearInterval(timer);
                    machine.classList.remove('spinning');
                    finishGame();
                }
            }, 70);
        }

        function finishGame() {
            const r1 = document.getElementById('s1').innerText;
            const r2 = document.getElementById('s2').innerText;
            const r3 = document.getElementById('s3').innerText;
            
            let result = "loss";
            if(r1 === r2 && r2 === r3) result = "jackpot";
            else if(r1 === r2 || r2 === r3 || r1 === r3) result = "small";

            tg.HapticFeedback.notificationOccurred(result === "loss" ? 'error' : 'success');
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç—É
            setTimeout(() => {
                tg.sendData(JSON.stringify({ type: "game", result: result }));
            }, 1000);
        }

        function buy(item, price) {
            tg.sendData(JSON.stringify({ type: "buy", item: item, price: price }));
        }
    </script>
</body>
</html>
